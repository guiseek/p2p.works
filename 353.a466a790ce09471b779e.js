(self.webpackChunkspeek=self.webpackChunkspeek||[]).push([[353],{1353:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MeetModule:()=>Ct});var a=i(3048);let o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({}),t})();var n=i(3237),r=i(3865),s=i(3835),l=i(2980),c=i(6489);const d=["*",[["mat-card-footer"]]],h=["*","mat-card-footer"];let u=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,e){2&t&&a.ekj("mat-card-actions-align-end","end"===e.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),m=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(l.Qb,8))},t.\u0275cmp=a.Xpm({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&a.ekj("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:h,decls:2,vars:0,template:function(t,e){1&t&&(a.F$t(d),a.Hsn(0),a.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[c.BQ],c.BQ]}),t})();var p=i(7360),f=i(2151),_=i(3331),v=i(4033),b=i(7113),C=i(6371),x=i(7144),y=i(2424),A=i(4192),O=i(6825),w=i(4658),k=i(8617),T=i(2322);function D(t,e){}class Z{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const R={dialogContainer:(0,w.X$)("dialogContainer",[(0,w.SB)("void, exit",(0,w.oB)({opacity:0,transform:"scale(0.7)"})),(0,w.SB)("enter",(0,w.oB)({transform:"none"})),(0,w.eR)("* => enter",(0,w.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,w.oB)({transform:"none",opacity:1}))),(0,w.eR)("* => void, * => exit",(0,w.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,w.oB)({opacity:0})))])};let S=(()=>{class t extends f.en{constructor(t,e,i,o,n,r){super(),this._elementRef=t,this._focusTrapFactory=e,this._changeDetectorRef=i,this._config=n,this._focusMonitor=r,this._animationStateChanged=new a.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=t=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(t)),this._ariaLabelledBy=n.ariaLabelledBy||null,this._document=o}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const e=(0,O.ht)(),i=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==i&&!i.contains(e)||(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,O.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,e=(0,O.ht)();return t===e||t.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(a.SBq),a.Y36(T.qV),a.Y36(a.sBO),a.Y36(n.K0,8),a.Y36(Z),a.Y36(T.tE))},t.\u0275dir=a.lG2({type:t,viewQuery:function(t,e){if(1&t&&a.Gf(f.Pl,7),2&t){let t;a.iGM(t=a.CRH())&&(e._portalOutlet=t.first)}},features:[a.qOj]}),t})(),I=(()=>{class t extends S{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:e}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:e}))}_onAnimationStart({toState:t,totalTime:e}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:e}):"exit"!==t&&"void"!==t||this._animationStateChanged.next({state:"closing",totalTime:e})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(t)))(i||t)}}(),t.\u0275cmp=a.Xpm({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&a.WFA("@dialogContainer.start",function(t){return e._onAnimationStart(t)})("@dialogContainer.done",function(t){return e._onAnimationDone(t)}),2&t&&(a.Ikx("id",e._id),a.uIk("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),a.d8E("@dialogContainer",e._state))},features:[a.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&a.YNc(0,D,0,0,"ng-template",0)},directives:[f.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[R.dialogContainer]}}),t})(),P=0;class F{constructor(t,e,i="mat-dialog-"+P++){this._overlayRef=t,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new v.x,this._afterClosed=new v.x,this._beforeClosed=new v.x,this._state=0,e._id=i,e._animationStateChanged.pipe((0,x.h)(t=>"opened"===t.state),(0,y.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,x.h)(t=>"closed"===t.state),(0,y.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe((0,x.h)(t=>t.keyCode===k.hY&&!this.disableClose&&!(0,k.Vb)(t))).subscribe(t=>{t.preventDefault(),M(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():M(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe((0,x.h)(t=>"closing"===t.state),(0,y.q)(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function M(t,e,i){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=e),t.close(i)}const q=new a.OlP("MatDialogData"),j=new a.OlP("mat-dialog-default-options"),B=new a.OlP("mat-dialog-scroll-strategy"),L={provide:B,deps:[p.aV],useFactory:function(t){return()=>t.scrollStrategies.block()}};let Y=(()=>{class t{constructor(t,e,i,a,o,n,r,s,l){this._overlay=t,this._injector=e,this._defaultOptions=i,this._parentDialog=a,this._overlayContainer=o,this._dialogRefConstructor=r,this._dialogContainerType=s,this._dialogDataToken=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new v.x,this._afterOpenedAtThisLevel=new v.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,b.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,A.O)(void 0))),this._scrollStrategy=n}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,e){(e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new Z)).id&&this.getDialogById(e.id);const i=this._createOverlay(e),a=this._attachDialogContainer(i,e),o=this._attachDialogContent(t,a,i,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),a._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const e=this._getOverlayConfig(t);return this._overlay.create(e)}_getOverlayConfig(t){const e=new p.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachDialogContainer(t,e){const i=a.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Z,useValue:e}]}),o=new f.C5(this._dialogContainerType,e.viewContainerRef,i,e.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,e,i,o){const n=new this._dialogRefConstructor(i,e,o.id);if(t instanceof a.Rgc)e.attachTemplatePortal(new f.UE(t,null,{$implicit:o.data,dialogRef:n}));else{const i=this._createInjector(o,n,e),a=e.attachComponentPortal(new f.C5(t,o.viewContainerRef,i));n.componentInstance=a.instance}return n.updateSize(o.width,o.height).updatePosition(o.position),n}_createInjector(t,e,i){const o=t&&t.viewContainerRef&&t.viewContainerRef.injector,n=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:e}];return!t.direction||o&&o.get(_.Is,null,a.XFs.Optional)||n.push({provide:_.Is,useValue:{value:t.direction,change:(0,C.of)()}}),a.zs3.create({parent:o||this._injector,providers:n})}_removeOpenDialog(t){const e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const e=t.parentElement.children;for(let i=e.length-1;i>-1;i--){let a=e[i];a===t||"SCRIPT"===a.nodeName||"STYLE"===a.nodeName||a.hasAttribute("aria-live")||(this._ariaHiddenElements.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(p.aV),a.Y36(a.zs3),a.Y36(void 0),a.Y36(void 0),a.Y36(p.Xj),a.Y36(void 0),a.Y36(a.DyG),a.Y36(a.DyG),a.Y36(a.OlP))},t.\u0275dir=a.lG2({type:t}),t})(),J=(()=>{class t extends Y{constructor(t,e,i,a,o,n,r){super(t,e,a,n,r,o,F,I,q)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(p.aV),a.LFG(a.zs3),a.LFG(n.Ye,8),a.LFG(j,8),a.LFG(B),a.LFG(t,12),a.LFG(p.Xj))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})(),N=0,E=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this._elementRef=e,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=z(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const e=t._matDialogClose||t._matDialogCloseResult;e&&(this.dialogResult=e.currentValue)}_onButtonClick(t){M(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(F,8),a.Y36(a.SBq),a.Y36(J))},t.\u0275dir=a.lG2({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,e){1&t&&a.NdJ("click",function(t){return e._onButtonClick(t)}),2&t&&a.uIk("aria-label",e.ariaLabel||null)("type",e.type)},inputs:{type:"type",dialogResult:["mat-dialog-close","dialogResult"],ariaLabel:["aria-label","ariaLabel"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[a.TTD]}),t})(),U=(()=>{class t{constructor(t,e,i){this._dialogRef=t,this._elementRef=e,this._dialog=i,this.id="mat-dialog-title-"+N++}ngOnInit(){this._dialogRef||(this._dialogRef=z(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(F,8),a.Y36(a.SBq),a.Y36(J))},t.\u0275dir=a.lG2({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,e){2&t&&a.Ikx("id",e.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),t})(),G=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),t})();function z(t,e){let i=t.nativeElement.parentElement;for(;i&&!i.classList.contains("mat-dialog-container");)i=i.parentElement;return i?e.find(t=>t.id===i.id):null}let Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[J,L],imports:[[p.U8,f.eL,c.BQ],c.BQ]}),t})();var V=i(3973),W=i(1717),H=i(6487),X=i(5834),$=i(1855),K=i(6346);const tt=t=>JSON.parse(t),et=t=>JSON.stringify(t),it=t=>{const e=t.get("audio"),i=t.get("video");return(null==e?void 0:e.value)||(null==i?void 0:i.value)?null:{someOneSelected:!0}};function at(t,e){if(1&t&&(a.TgZ(0,"mat-option",11),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t),a.xp6(1),a.hij(" ",t.label," ")}}function ot(t,e){1&t&&(a.TgZ(0,"mat-error"),a._uU(1," Por favor, selecione uma c\xe2mera "),a.qZA())}function nt(t,e){if(1&t&&(a.TgZ(0,"mat-option",11),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t),a.xp6(1),a.hij(" ",t.label," ")}}function rt(t,e){1&t&&(a.TgZ(0,"mat-error"),a._uU(1," Por favor, selecione um microfone "),a.qZA())}function st(t,e){if(1&t&&(a.TgZ(0,"div",12),a._UZ(1,"audio",13),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("srcObject",t.streamConfig.audio)}}let lt=(()=>{class t{constructor(){this._audio=new K.X([]),this.audio$=this._audio.asObservable(),this._video=new K.X([]),this.video$=this._video.asObservable(),this.deviceState=new r.cw({audio:new r.NI(!0),video:new r.NI(!0)}),this.deviceConfig=new r.cw({audio:new r.NI(""),video:new r.NI("")},{validators:it}),this.streamConfig={audio:null,video:null}}ngOnInit(){let t=localStorage.getItem("audio"),e=localStorage.getItem("video");t&&(t=tt(t)),e&&(e=tt(e)),navigator.mediaDevices.enumerateDevices().then(i=>{this._audio.next(i.filter(t=>"audioinput"===t.kind)),this._video.next(i.filter(t=>"videoinput"===t.kind)),this.deviceConfig.patchValue({audio:t,video:e})})}compareWith(t,e){return t&&e&&t.deviceId===e.deviceId}onAudioChange(t){return(0,$.mG)(this,void 0,void 0,function*(){if(!t)return localStorage.removeItem("audio"),void(this.streamConfig.audio=null);const e=navigator.mediaDevices,i={deviceId:t.deviceId},a=yield e.getUserMedia({audio:i});localStorage.setItem("audio",et(t.toJSON())),this.streamConfig.audio=a})}onVideoChange(t){return(0,$.mG)(this,void 0,void 0,function*(){if(!t)return localStorage.removeItem("video"),void(this.streamConfig.video=null);const e=navigator.mediaDevices,i={deviceId:t.deviceId},a=yield e.getUserMedia({video:i});localStorage.setItem("video",et(t.toJSON())),this.streamConfig.video=a})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["speek-config"]],decls:30,vars:16,consts:[["mat-dialog-title",""],[3,"formGroup"],["appearance","fill"],["formControlName","video",3,"compareWith","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["muted","","autoplay","","playsinline","","poster","assets/camera.svg",3,"srcObject"],["formControlName","audio",3,"compareWith","selectionChange"],["class","container",4,"ngIf"],["mat-dialog-actions","","align","end"],["type","button","mat-stroked-button","",3,"disabled","mat-dialog-close","color"],[3,"value"],[1,"container"],["autoplay","","playsinline","",3,"srcObject"]],template:function(t,e){if(1&t&&(a.TgZ(0,"h3",0),a._uU(1,"Configura\xe7\xe3o"),a.qZA(),a.TgZ(2,"form",1),a.TgZ(3,"mat-form-field",2),a.TgZ(4,"mat-label"),a._uU(5,"C\xe2mera"),a.qZA(),a.TgZ(6,"mat-select",3),a.NdJ("selectionChange",function(t){return e.onVideoChange(t.value)}),a.TgZ(7,"mat-option"),a._uU(8,"- Sem c\xe2mera -"),a.qZA(),a.YNc(9,at,2,2,"mat-option",4),a.ALo(10,"async"),a.qZA(),a.YNc(11,ot,2,0,"mat-error",5),a.TgZ(12,"mat-hint"),a._uU(13,"Selecione sua c\xe2mera"),a.qZA(),a.qZA(),a._UZ(14,"video",6),a.TgZ(15,"mat-form-field",2),a.TgZ(16,"mat-label"),a._uU(17,"Microfone"),a.qZA(),a.TgZ(18,"mat-select",7),a.NdJ("selectionChange",function(t){return e.onAudioChange(t.value)}),a.TgZ(19,"mat-option"),a._uU(20,"- Sem microfone -"),a.qZA(),a.YNc(21,nt,2,2,"mat-option",4),a.ALo(22,"async"),a.qZA(),a.YNc(23,rt,2,0,"mat-error",5),a.TgZ(24,"mat-hint"),a._uU(25,"Selecione seu microfone"),a.qZA(),a.qZA(),a.YNc(26,st,2,1,"div",8),a.qZA(),a.TgZ(27,"footer",9),a.TgZ(28,"button",10),a._uU(29," Salvar e entrar "),a.qZA(),a.qZA()),2&t){let t,i;a.xp6(2),a.Q6J("formGroup",e.deviceConfig),a.xp6(4),a.Q6J("compareWith",e.compareWith),a.xp6(3),a.Q6J("ngForOf",a.lcZ(10,12,e.video$)),a.xp6(2),a.Q6J("ngIf",null==(t=e.deviceConfig.get("video"))?null:t.invalid),a.xp6(3),a.Q6J("srcObject",e.streamConfig.video),a.xp6(4),a.Q6J("compareWith",e.compareWith),a.xp6(3),a.Q6J("ngForOf",a.lcZ(22,14,e.audio$)),a.xp6(2),a.Q6J("ngIf",null==(i=e.deviceConfig.get("audio"))?null:i.invalid),a.xp6(3),a.Q6J("ngIf",e.streamConfig.audio),a.xp6(2),a.Q6J("disabled",e.deviceConfig.invalid)("mat-dialog-close",e.deviceConfig.valid)("color",e.deviceConfig.valid?"accent":"default")}},directives:[U,r._Y,r.JL,r.sg,V.KE,V.hX,H.gD,r.JJ,r.u,c.ey,n.sg,n.O5,V.bx,G,s.lW,E,V.TO],pipes:[n.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{width:410px;overflow:hidden}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%], [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%}"]}),t})(),ct=(()=>{class t{constructor(t){this.dialog=t}canActivate(t){let e=localStorage.getItem("audio"),i=localStorage.getItem("video");if(e){const{deviceId:t}=tt(e);e={deviceId:t}}if(i){const{deviceId:t}=tt(i);i={deviceId:t}}return!(!e&&!i)||this.openConfiguration(t)}openConfiguration(t){return this.dialog.open(lt,{data:t.paramMap.get("meet"),closeOnNavigation:!1,disableClose:!0}).afterClosed()}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(J))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})();var dt=i(6436),ht=i(3174);const ut=["audioCanvas"],mt=function(t){return{videoff:t}};let gt=(()=>{class t{constructor(t,e,i){this.route=t,this._router=e,this.peer=i;const{meet:a}=this.route.snapshot.params;this.meet=a||""}ngOnInit(){this.peer.connect(this.meet)}ngAfterViewInit(){console.log(this.audioCanvasRef),this.audioCanvas=this.audioCanvasRef.nativeElement,this.peer.on("stream",t=>{this.draw(t)})}draw(t){return(0,$.mG)(this,void 0,void 0,function*(){if(this.audioCanvas){const e=new AudioContext,i=e.createMediaStreamSource(t),a=e.createAnalyser();(0,dt.st)(this.audioCanvas,a),i.connect(a),a.connect(e.destination)}})}onConnect(){this.peer.on("data",t=>{console.log(t)})}onFileChange(t){const e=t.item(0);e&&this.peer.upload(e)}record(t){var e;if(this.recorder&&"inactive"!==(null===(e=this.recorder)||void 0===e?void 0:e.state))this.recorder.stop(),this.recorder=null;else{this.recorder=new MediaRecorder(t);const e=[];this.recorder.ondataavailable=({data:t})=>{e.push(t)},this.recorder.onstop=()=>{const t=new Blob(e,{type:"video/webm"}),i=document.createElement("a");i.download=(new Date).toDateString()+".webm",i.href=URL.createObjectURL(t),i.click(),URL.revokeObjectURL(i.href)},this.recorder.start()}}end(){this.peer.close(),this._router.navigate(["/"])}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(X.gz),a.Y36(X.F0),a.Y36(ht._))},t.\u0275cmp=a.Xpm({type:t,selectors:[["speek-meet"]],viewQuery:function(t,e){if(1&t&&a.Gf(ut,5),2&t){let t;a.iGM(t=a.CRH())&&(e.audioCanvasRef=t.first)}},decls:24,vars:11,consts:[["id","remote"],["autoplay","","playsinline","",3,"srcObject"],["id","local",3,"ngClass"],["autoplay","","playsinline","",3,"muted","srcObject"],["height","15px"],["audioCanvas",""],["type","button","mat-icon-button","",3,"click"],["type","button","mat-icon-button","",3,"color","click"],["type","file","name","files",3,"multiple","change"],["inputFile",""],["mat-fab","","color","warn",3,"click"]],template:function(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"mat-card",0),a._UZ(1,"video",1),a.qZA(),a.TgZ(2,"mat-card",2),a._UZ(3,"video",3),a._UZ(4,"canvas",4,5),a.TgZ(6,"mat-card-actions"),a.TgZ(7,"button",6),a.NdJ("click",function(){return e.peer.toggleVideo(e.peer.stream)}),a.TgZ(8,"mat-icon"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"button",6),a.NdJ("click",function(){return e.peer.toggleAudio(e.peer.stream)}),a.TgZ(11,"mat-icon"),a._uU(12),a.qZA(),a.qZA(),a.TgZ(13,"button",6),a.NdJ("click",function(){return a.CHM(t),a.MAs(20).click()}),a.TgZ(14,"mat-icon"),a._uU(15,"upload"),a.qZA(),a.qZA(),a.TgZ(16,"button",7),a.NdJ("click",function(){return e.record(e.peer.stream)}),a.TgZ(17,"mat-icon"),a._uU(18),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"input",8,9),a.NdJ("change",function(t){return e.onFileChange(t.target.files)}),a.qZA(),a.TgZ(21,"button",10),a.NdJ("click",function(){return e.end()}),a.TgZ(22,"mat-icon"),a._uU(23,"call_end"),a.qZA(),a.qZA()}2&t&&(a.xp6(1),a.Q6J("srcObject",e.peer.remote),a.xp6(1),a.Q6J("ngClass",a.VKq(9,mt,e.peer.uiState.video)),a.xp6(1),a.Q6J("muted",!0)("srcObject",e.peer.stream),a.xp6(6),a.hij(" ",e.peer.uiState.video?"videocam_off":"videocam"," "),a.xp6(3),a.Oqu(e.peer.uiState.audio?"mic_off":"mic"),a.xp6(4),a.Q6J("color","recording"!==(null==e.recorder?null:e.recorder.state)?"default":"warn"),a.xp6(2),a.Oqu("recording"!==(null==e.recorder?null:e.recorder.state)?"radio_button_unchecked":"radio_button_checked"),a.xp6(1),a.Q6J("multiple",!1))},directives:[m,n.mk,u,s.lW,W.Hw],styles:["[_nghost-%COMP%]{flex:1;display:flex;align-items:center;margin:10px;flex-direction:column}.container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;width:100%;object-fit:contain}.mat-card[_ngcontent-%COMP%]{padding:0;overflow:hidden;border-radius:8px;background-color:#fff}.mat-card.videoff[_ngcontent-%COMP%]{transition:opacity .25s ease-in-out;opacity:.2}.mat-card.videoff[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{opacity:0;transition:opacity .25s ease-in-out}video[_ngcontent-%COMP%]{width:100%;max-width:100%}input[type=file][_ngcontent-%COMP%]{display:none}@media (orientation:landscape){.mat-card#remote[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:100%;object-fit:contain}}@media (orientation:portrait){.mat-card#remote[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:100%;object-fit:cover}}.mat-card#remote[_ngcontent-%COMP%]{object-fit:contain;width:100%;flex:1}.mat-card#local[_ngcontent-%COMP%]{max-width:200px;position:fixed;bottom:20px;left:20px}.mat-card#local[_ngcontent-%COMP%] > .mat-card-actions[_ngcontent-%COMP%]{padding:0;opacity:.8;display:flex;margin:0;justify-content:space-evenly}.mat-fab[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px}"]}),t})();var pt=(()=>(function(t){t.KnockKnock="knock-knock",t.Connection="connection",t.Available="available",t.Message="message",t.Answer="answer",t.Offer="offer"}(pt||(pt={})),pt))(),ft=i(8022),_t=i(123);let vt=(()=>{class t{constructor(t,e,i){this.router=t,this.dialog=e,this._signaling=i}canActivate({params:t}){if("string"!=typeof t.meet)return!1;const e={meet:t.meet},i=new ft.y(t=>{this._signaling.on(pt.Available,e=>{e&&(console.log(e),t.next(!!e))})});return this._signaling.emit(pt.KnockKnock,e),i}openAlert(t){return this.dialog.open(lt,{data:t.paramMap.get("meet"),closeOnNavigation:!1,disableClose:!0}).afterClosed()}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(X.F0),a.LFG(J),a.LFG(_t.R))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const bt=[{path:":meet",component:gt,canActivate:[ct,vt]}];let Ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[vt,ct],imports:[[n.ez,o,r.UX,g,H.LD,V.lN,s.ot,W.Ps,Q,X.Bz.forChild(bt)]]}),t})()}}]);